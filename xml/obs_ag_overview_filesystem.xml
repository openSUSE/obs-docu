<!DOCTYPE chapter
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<chapter xmlns="http://docbook.org/ns/docbook"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xlink="http://www.w3.org/1999/xlink" version="5.1"
 xml:id="obs-cha-overview-filesystem">
 <title>File System Overview</title>
 <info/>

 <sect1 xml:id="configuration-files">
  <title>Configuration Files</title>
  <sect2 xml:id="configuration-files-frontend-configuration">
   <title>Front-end Configuration</title>
   <para>The front-end is configured with four files:</para>
   <itemizedlist>
    <listitem>
     <para>/srv/www/obs/api/config/database.yml</para>
    </listitem>
    <listitem>
     <para>/srv/www/obs/api/config/options.yml</para>
    </listitem>
    <listitem>
     <para>/srv/www/obs/api/config/feature.yml</para>
    </listitem>
    <listitem>
     <para>/etc/apache2/vhosts.d/obs.conf</para>
    </listitem>
   </itemizedlist>
   <sect3 xml:id="configuration-files-frontend-configuration-database-yml">
    <title><filename>database.yml</filename></title>
    <para>This file has the information needed to access the database. It
     contain credentials for the database access and should be only readable by
     root and the group running the Web server (www).</para>
    <para>The file has settings for the production, development and test
     ruby environment, for production systems only the production section is
     important.</para>
    <para>Example production section</para>
    <screen>production:
  adapter: mysql2
  database: api_production
  username: obsapiuser
  password: topsecret
  encoding: utf8
  timeout: 15
  pool: 30</screen>
    <table frame="all" rowsep="1" colsep="1">
     <title>Database Configuration Keywords</title>
     <tgroup cols="3">
      <colspec colname="col_1" colwidth="22*"/>
      <colspec colname="col_2" colwidth="33*"/>
      <colspec colname="col_3" colwidth="44*"/>
      <thead>
       <row>
        <entry align="left" valign="top"> keyword </entry>
        <entry align="left" valign="top"> Description </entry>
        <entry align="left" valign="top">Remarks</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="left" valign="top">
         <para>adapter</para>
        </entry>
        <entry align="left" valign="top">
         <para>Database driver</para>
        </entry>
        <entry align="left" valign="top">
         <para>only MySQL databases are supported</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>database</para>
        </entry>
        <entry align="left" valign="top">
         <para>Database name</para>
        </entry>
        <entry align="left" valign="top">
         <para>do not change !</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>username</para>
        </entry>
        <entry align="left" valign="top">
         <para>MySQL user name</para>
        </entry>
        <entry align="left" valign="top">
         <para>database user, not a system user</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>password</para>
        </entry>
        <entry align="left" valign="top">
         <para>password for this user</para>
        </entry>
        <entry align="left" valign="top">
         <para>clear text</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>encoding</para>
        </entry>
        <entry align="left" valign="top">
         <para>codetable</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>timeout</para>
        </entry>
        <entry align="left" valign="top">
         <para>wait time in milliseconds</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>pool</para>
        </entry>
        <entry align="left" valign="top">
         <para>number of open connections per thread</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>socket</para>
        </entry>
        <entry align="left" valign="top">
         <para>path to the MySQL socket</para>
        </entry>
        <entry align="left" valign="top">
         <para>same host only</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>host</para>
        </entry>
        <entry align="left" valign="top">
         <para>IP address or hostname of the MySQL server</para>
        </entry>
        <entry align="left" valign="top">
         <para>for remote servers</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>port</para>
        </entry>
        <entry align="left" valign="top">
         <para>port number of the MySQL server</para>
        </entry>
        <entry align="left" valign="top">
         <para>for remote servers</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect3>
   <sect3 xml:id="configuration-files-frontend-configuration-options-yml">
    <title><filename>options.yml</filename></title>
    <para>The configuration file /srv/www/obs/api/config/options.yml is the
     default configuration file for the Open Build Service Web UI and API. It
     contains configuration parameters for example for back-end connections and
     connection to the API. Important are the configurations for source and
     front-end hosts. The configuration for LDAP authentication is also located
     in this file.</para>
      <para>
        Configuration options can be set per
        <link xlink:href="https://guides.rubyonrails.org/configuring.html#rails-environment-settings">Rails environment</link>
        or as generic configuration option defined in <emphasis>default</emphasis>.
      </para>
    <note>
      <para>
        We've updated the format of the <emphasis>options.yml</emphasis> after
        the release of OBS 2.9. Old configuration files can be converted via
       </para>
       <screen><prompt>(cd /srv/www/obs/api/; rake migrate_options_yml)</prompt></screen>
    </note>
    <note>
     <para>More and more configurations will be moved to the database and do
      not longer exist in this file. The database configuration can be accessed
      via the API <emphasis>/configuration</emphasis> path.</para>
    </note>
    <table frame="all" rowsep="1" colsep="1">
     <title><filename>options.yml</filename> Configuration Items</title>
     <tgroup cols="4">
      <colspec colname="col_1" colwidth="28*"/>
      <colspec colname="col_2" colwidth="25*"/>
      <colspec colname="col_3" colwidth="20*"/>
      <colspec colname="col_4" colwidth="25*"/>
      <thead>
       <row>
        <entry align="left" valign="top"> Config item </entry>
        <entry align="left" valign="top"> Description </entry>
        <entry align="left" valign="top"> Values <literal>default</literal>
        </entry>
        <entry align="left" valign="top"> Remarks</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="left" valign="top">
         <para>use_xforward</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use mod_xforward module</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>true</literal> false</para>
        </entry>
        <entry align="left" valign="top">
         <para>Apache only, should be true</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>use_nginx_redirect</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use X-Accel-Redirect</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>/internal_redirect</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>Nginx only</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>min_votes_for_rating</para>
        </entry>
        <entry align="left" valign="top">
         <para>Minimum votes for a rating</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>3</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>response_schema_validation</para>
        </entry>
        <entry align="left" valign="top">
         <para>Set to true to verify XML responses comply to the
          schema</para>
        </entry>
        <entry align="left" valign="top">
         <para>true <literal>false</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>source_host</para>
        </entry>
        <entry align="left" valign="top">
         <para>back-end source server host</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>localhost</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>source_port</para>
        </entry>
        <entry align="left" valign="top">
         <para>back-end source server port</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>5352</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>source_protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para>back-end source server protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>http</literal>, https</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>front end_host</para>
        </entry>
        <entry align="left" valign="top">
         <para>Front-end host</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>localhost</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>frontend_port</para>
        </entry>
        <entry align="left" valign="top">
         <para>Front-end port</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>443</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>frontend_protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para>Front-end protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para>http <literal>https</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>external_frontend_host</para>
        </entry>
        <entry align="left" valign="top">
         <para>External Front-end host</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>if your users access the hosts through a proxy or different
          name</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>external_frontend_port</para>
        </entry>
        <entry align="left" valign="top">
         <para>External Front-end port</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>443</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>external_frontend_protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para>External Front-end protocol</para>
        </entry>
        <entry align="left" valign="top">
         <para>http <literal>https</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>extended_backend_log</para>
        </entry>
        <entry align="left" valign="top">
         <para>Extended back-end log</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>true</literal> false</para>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>proxy_auth_mode:</para>
        </entry>
        <entry align="left" valign="top">
         <para>turn proxy mode on/off</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>:off</literal> :on</para>
        </entry>
        <entry align="left" valign="top">
         <para>see LDAP section</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>proxy_auth_test_user</para>
        </entry>
        <entry align="left" valign="top">
         <para>Test user</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>coolguy</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>proxy_auth_test_email</para>
        </entry>
        <entry align="left" valign="top">
         <para>Email of Test user</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>coolguy@ example.com</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>global_write_through</para>
        </entry>
        <entry align="left" valign="top">
         <para>if set to false, the API will only fake writes to
          back-end</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>true</literal> false</para>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>auto_cleanup_after_days</para>
        </entry>
        <entry align="left" valign="top">
         <para>not longer used</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>30</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>moved to /configuration API</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>errbit_api_key</para>
        </entry>
        <entry align="left" valign="top">
         <para>API key of the application</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>errbit_host</para>
        </entry>
        <entry align="left" valign="top">
         <para>installation of errbit.com a Ruby error catcher</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>errbit_api_key</para>
        </entry>
        <entry align="left" valign="top">
         <para>API key of the application</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>test/debug option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>ldap_mode:</para>
        </entry>
        <entry align="left" valign="top">
         <para>OBS LDAP mode on/off</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>:off</literal> :on</para>
        </entry>
        <entry align="left" valign="top">
         <para>see LDAP section</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>Example options.yml</para>
    <screen>#
# This file contains the default configuration of the Open Build Service
# API.
#

default: &#38;default
  # Make use of mod_xforward module in apache
  use_xforward: true

  # Make use of X-Accel-Redirect for Nginx.
  # http://kovyrin.net/2010/07/24/nginx-fu-x-accel-redirect-remote
  #use_nginx_redirect: /internal_redirect

  # Minimum count of rating votes a project/package needs to # be taken in
  # account
  # for global statistics:
  min_votes_for_rating: 3

  # Set to true to verify XML reponses comply to the schema
  response_schema_validation: false

  # backend source server
  source_host: localhost
  source_port: 5352
  #source_protocol: https

  # api access to this instance
  frontend_host: localhost
  frontend_port: 443
  frontend_protocol: https
  # if your users access the hosts through a proxy (or just a different name,
  # use this to
  # overwrite the settings for users)
  #external_frontend_host: api.opensuse.org
  #external_frontend_port: 443
  #external_frontend_protocol: https


  extended_backend_log: true

  # proxy_auth_mode can be :off, :on or :simulate
  proxy_auth_mode: :off

  # ATTENTION: If proxy_auth_mode'is :on, the frontend takes the user
  # name that is coming as headervalue X-username as a
  # valid user does no further authentication. So take care...
  proxy_auth_test_user: coolguy
  proxy_auth_test_email: coolguy@example.com

  # set this to enable auto cleanup requests after the given days
  auto_cleanup_after_days: 30

  #schema_location

  #version

  # if set to false, the API will only fake writes to backend (useful in
  # testing)
  # global_write_through: true

  # see
  # http://colszowka.heroku.com/2011/02/22/setting-up-your-custom-hoptoad-notifier-endpoint-for-free-using-errbit-on-heroku
  #errbit_api_key: api_key_of_your_app
  #errbit_host: installation.of.errbit.com

production:
  &#60;&#60;: *default

test:
  &#60;&#60;: *default
  source_host: backend
  memcached_host: cache

development:
  &#60;&#60;: *default
  source_host: backend
  memcached_host: cache
</screen>
   </sect3>
   <sect3 xml:id="configuration-files-frontend-configuration-feature-yml">
    <title><filename>feature.yml</filename></title>
    <para>The configuration file /srv/www/obs/api/config/feature.yml
     contains the default configuration about features that can be enabled or
     disabled in Open Build Service.</para>
    <table frame="all" rowsep="1" colsep="1">
     <title><filename>feature.yml</filename> Configuration Items</title>
     <tgroup cols="4">
      <colspec colname="col_1" colwidth="28*"/>
      <colspec colname="col_2" colwidth="25*"/>
      <colspec colname="col_3" colwidth="20*"/>
      <colspec colname="col_4" colwidth="25*"/>
      <thead>
       <row>
        <entry align="left" valign="top"> Config item </entry>
        <entry align="left" valign="top"> Description </entry>
        <entry align="left" valign="top"> Values <literal>default</literal>
        </entry>
        <entry align="left" valign="top"> Remarks</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="left" valign="top">
         <para>image_templates</para>
        </entry>
        <entry align="left" valign="top">
         <para>enable/disable image template feature</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>true</literal> false</para>
        </entry>
        <entry align="left" valign="top">
         <para>see Reference Guide for more information</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>kiwi_image_editor</para>
        </entry>
        <entry align="left" valign="top">
         <para>enable/disable Kiwi Image Editor</para>
        </entry>
        <entry align="left" valign="top">
         <para>true <literal>false</literal></para>
        </entry>
        <entry align="left" valign="top">
         <para></para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>cloud_upload</para>
        </entry>
        <entry align="left" valign="top">
         <para>enable/disable Cloud Upload setup</para>
        </entry>
        <entry align="left" valign="top">
         <para>true <literal>false</literal></para>
        </entry>
        <entry align="left" valign="top">
         <para></para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>Example feature.yml</para>
    <screen>
<![CDATA[
production:
  features: &default
    image_templates: true
    kiwi_image_editor: false
    cloud_upload: false

development:
  features:
    <<: *default
    kiwi_image_editor: true
    cloud_upload: true

test:
  features:
    <<: *default
    kiwi_image_editor: true
    cloud_upload: true
]]>
    </screen>
   </sect3>
   <sect3 xml:id="configuration-files-frontend-configuration-apache-vhost-obs-conf">
    <title>Apache Virtual Host <filename>obs.conf</filename></title>
    <para>The Apache configuration depends on the Apache version and which
     extra options are used, so use the documentation of the Apache version you
     are using.</para>
    <para>Here, as an example, the standard configuration used by the appliance:
     Apache vhost example</para>
    <screen>Listen 82
# May needed on old distributions or after an update from them.
#Listen 443

# Passenger defaults
PassengerSpawnMethod "smart"
PassengerMaxPoolSize 20
#RailsEnv "development"

# allow long request urls and being part of headers
LimitRequestLine 20000
LimitRequestFieldsize 20000

# Just the overview page
&lt;VirtualHost *:80&gt;
        # just give an overview about this OBS instance via static web page
        DocumentRoot  "/srv/www/obs/overview"

        &lt;Directory /srv/www/obs/overview&gt;
           Options Indexes
           Require all granted
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;


# Build Results
&lt;VirtualHost *:82&gt;
        # The resulting repositories
        DocumentRoot  "/srv/obs/repos"

        &lt;Directory /srv/obs/repos&gt;
           Options Indexes FollowSymLinks
           Require all granted
        &lt;/Directory&gt;
&lt;/VirtualHost&gt;


# OBS WEB UI &amp; API
&lt;VirtualHost *:443&gt;
        ServerName api

        #  General setup for the virtual host
        DocumentRoot  "/srv/www/obs/api/public"
        ErrorLog /srv/www/obs/api/log/apache_error.log
        TransferLog /srv/www/obs/api/log/apache_access.log

        PassengerMinInstances 2
        PassengerPreStart https://api

        SSLEngine on

        #  SSL protocols
        #  Supporting TLS only is adequate nowadays
        SSLProtocol all -SSLv2 -SSLv3

        #   SSL Cipher Suite:
        #   List the ciphers that the client is permitted to negotiate.
        #   We disable weak ciphers by default.
        #   See the mod_ssl documentation or "openssl ciphers -v" for a
        #   complete list.
        SSLCipherSuite ALL:!aNULL:!eNULL:!SSLv2:!LOW:!EXP:!MD5:@STRENGTH

        SSLCertificateFile /srv/obs/certs/server.crt
        SSLCertificateKeyFile /srv/obs/certs/server.key

        &lt;Directory /srv/www/obs/api/public&gt;
           AllowOverride all
           Options -MultiViews

           # This requires mod_xforward loaded in apache
           # Enable the usage via options.yml
           # This will decrease the load due to long running requests a lot (unloading from rails stack)
           XForward on

           Require all granted
        &lt;/Directory&gt;

        SetEnvIf User-Agent ".*MSIE [1-5].*" \
                 nokeepalive ssl-unclean-shutdown \
                 downgrade-1.0 force-response-1.0

        CustomLog /var/log/apache2/ssl_request_log   ssl_combined


        # from http://guides.rubyonrails.org/asset_pipeline.html
        &lt;LocationMatch "^/assets/.*$"&gt;
          Header unset ETag
          FileETag None
          # RFC says only cache for 1 year
          ExpiresActive On
          ExpiresDefault "access plus 1 year"
       &lt;/LocationMatch&gt;

        SetEnvIf User-Agent ".*MSIE [1-5].*" \
                 nokeepalive ssl-unclean-shutdown \
                 downgrade-1.0 force-response-1.0

        ## Older firefox versions needs this, otherwise it wont cache anything over SSL.
        Header append Cache-Control "public"

&lt;/VirtualHost&gt;</screen>
   </sect3>
  </sect2>
  <sect2 xml:id="configuration-files-backend-configuration">
   <title>Back-end Configuration</title>
   <para>The Back-end is configured with 2 files:</para>
   <itemizedlist>
    <listitem>
     <para> /etc/sysconfig/obs-server - a shell script used for workers and
      the OBS start scripts </para>
    </listitem>
    <listitem>
     <para> /usr/lib/obs/server/BSConfig.pm - a Perl script defining some
      global variables </para>
    </listitem>
   </itemizedlist>
   <sect3 xml:id="configuration-files-backend-configuration-etc-sysconfig-obs-server">
    <title><filename>/etc/sysconfig/obs-server</filename></title>
    <para>This script is used to set up the basic paths and the worker. the
     most important settings are the <emphasis role="strong"
      >OBS_SRC_SERVER</emphasis> and <emphasis role="strong"
      >OBS_REPO_SERVERS</emphasis> and the <emphasis role="strong"
      >OBS_WORKER_INSTANCES</emphasis>.</para>
    <table frame="all" rowsep="1" colsep="1">
     <title><filename>obs-server</filename> Variables</title>
     <tgroup cols="4">
      <colspec colname="col_1" colwidth="32*"/>
      <colspec colname="col_2" colwidth="22*"/>
      <colspec colname="col_3" colwidth="22*"/>
      <colspec colname="col_4" colwidth="22*"/>
      <thead>
       <row>
        <entry align="left" valign="top"> Variable </entry>
        <entry align="left" valign="top"> Description </entry>
        <entry align="left" valign="top"> Values <literal>default</literal>
        </entry>
        <entry align="left" valign="top"> Remarks</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="left" valign="top">
         <para>OBS_BACKENDCODE_DIR</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to the back-end scripts</para>
        </entry>
        <entry align="left" valign="top">
         <para>/usr/lib/obs/server/</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_RUN_DIR</para>
        </entry>
        <entry align="left" valign="top">
         <para>communication directory base</para>
        </entry>
        <entry align="left" valign="top">
         <para>/srv/obs/run</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_LOG_DIR</para>
        </entry>
        <entry align="left" valign="top">
         <para>logging directory</para>
        </entry>
        <entry align="left" valign="top">
         <para>/srv/obs/log</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_BASE_DIR</para>
        </entry>
        <entry align="left" valign="top">
         <para>base directory</para>
        </entry>
        <entry align="left" valign="top">
         <para>/srv/obs</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_API_AUTOSETUP</para>
        </entry>
        <entry align="left" valign="top">
         <para>Automatically setup API and Web UI</para>
        </entry>
        <entry align="left" valign="top">
         <para>yes <literal>no</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>appliance only, will overwrite config files</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_SRC_SERVER</para>
        </entry>
        <entry align="left" valign="top">
         <para>source server host</para>
        </entry>
        <entry align="left" valign="top">
         <para>localhost:5352</para>
        </entry>
        <entry align="left" valign="top">
         <para>only one</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_REPO_SERVERS</para>
        </entry>
        <entry align="left" valign="top">
         <para>repository server host</para>
        </entry>
        <entry align="left" valign="top">
         <para>localhost:5252</para>
        </entry>
        <entry align="left" valign="top">
         <para>maybe a list</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_INSTANCES</para>
        </entry>
        <entry align="left" valign="top">
         <para>number of build instances</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>0</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_INSTANCE _NAMES</para>
        </entry>
        <entry align="left" valign="top">
         <para>names of the workers</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>space-separated list</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_DIRECTORY</para>
        </entry>
        <entry align="left" valign="top">
         <para>worker base directory</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_PORTBASE</para>
        </entry>
        <entry align="left" valign="top">
         <para>The base for port numbers used by worker</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>0</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>0 OS assign number</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_JOBS</para>
        </entry>
        <entry align="left" valign="top">
         <para>Number of parallel compile jobs</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer <literal>1</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_TEST_MODE</para>
        </entry>
        <entry align="left" valign="top">
         <para>Run in test mode</para>
        </entry>
        <entry align="left" valign="top">
         <para>yes <literal>no</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_HOST LABELS</para>
        </entry>
        <entry align="left" valign="top">
         <para>one or more labels for the build host</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>may used by constraints</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_USE_SLP</para>
        </entry>
        <entry align="left" valign="top">
         <para>Register in SLP server</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>yes</literal> no</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_CACHE_DIR</para>
        </entry>
        <entry align="left" valign="top">
         <para>cache directory for downloaded packages</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_CACHE_SIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>package cache size</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>in MB</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_NICE _LEVEL</para>
        </entry>
        <entry align="left" valign="top">
         <para>nice level of running workers</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>18</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_TYPE</para>
        </entry>
        <entry align="left" valign="top">
         <para>VM type</para>
        </entry>
        <entry align="left" valign="top">
         <para><emphasis role="strong">auto</emphasis> Xen kvm lxc zvm
          emulator:$arch none</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_KERNEL</para>
        </entry>
        <entry align="left" valign="top">
         <para>Set kernel used by worker</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>none</literal> (/boot/vmlinuz)</para>
        </entry>
        <entry align="left" valign="top">
         <para>KVM option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_INITRD</para>
        </entry>
        <entry align="left" valign="top">
         <para>initrd used by worker</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>none</literal> (/boot/vmlinuz)</para>
        </entry>
        <entry align="left" valign="top">
         <para>KVM option</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_DISK_AUTOSETUP _ROOT_FILESIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>Autosetup disk size</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>4096</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>in MB</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_DISK_AUTOSETUP _SWAP_FILESIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>Autosetup swap size</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>1024</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>on MB</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_DISK_AUTOSETUP _FILESYSTEM</para>
        </entry>
        <entry align="left" valign="top">
         <para>File System used with autosetup</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>ext3</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_DISK_AUTOSETUP _MOUNT_OPTIONS</para>
        </entry>
        <entry align="left" valign="top">
         <para>Special mount options</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_VM_USE_TMPFS</para>
        </entry>
        <entry align="left" valign="top">
         <para>Enable build in memory</para>
        </entry>
        <entry align="left" valign="top">
         <para>yes <literal>no</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>requires much memory</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_INSTANCE_MEMORY</para>
        </entry>
        <entry align="left" valign="top">
         <para>Memory allocated for a VM</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>512</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_STORAGE_AUTOSETUP</para>
        </entry>
        <entry align="left" valign="top">
         <para>storage auto configuration</para>
        </entry>
        <entry align="left" valign="top">
         <para>yes <literal>no</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>may destroy disk content</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_SETUP_WORKER _PARTITIONS</para>
        </entry>
        <entry align="left" valign="top">
         <para>LVM via obsstoragesetup</para>
        </entry>
        <entry align="left" valign="top">
         <para>take_all <literal>use_obs_vg</literal> none</para>
        </entry>
        <entry align="left" valign="top">
         <para>may destroy disk content</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_CACHE_SIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>LVM partition for cache size</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_ROOT_SIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>LVM partition for root size</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_SWAP_SIZE</para>
        </entry>
        <entry align="left" valign="top">
         <para>LVM partition for swap size</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_BINARIES _PROXY</para>
        </entry>
        <entry align="left" valign="top">
         <para>proxy service for caching binaries</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_ROOT_SSHD_KEY_URL</para>
        </entry>
        <entry align="left" valign="top">
         <para>ssh pub key to allow root user login</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>for mass deployment</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>OBS_WORKER_SCRIPT_URL</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL to the initial script</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>For workers the settings could be declared in the
      <emphasis>/etc/buildhost.config</emphasis> file as well.</para>
    <screen>#
# NOTE: all these options can be also declared in /etc/buildhost.config on each worker differently.
#

## Path:        Applications/OBS
## Description: The OBS backend code directory
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty dir will lead to the fall back directory, typically /usr/lib/obs/server/
#
OBS_BACKENDCODE_DIR=""

## Path:        Applications/OBS
## Description: The base for OBS communication directory
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty dir will lead to the fall back directory, typically /srv/obs/run
#
OBS_RUN_DIR="/srv/obs/run"

## Path:        Applications/OBS
## Description: The base for OBS logging directory
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty dir will lead to the fall back directory, typically /srv/obs/log
#
OBS_LOG_DIR="/srv/obs/log"

## Path:        Applications/OBS
## Description: The base directory for OBS
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty dir will lead to the fall back directory, typically /srv/obs
#
OBS_BASE_DIR=""

## Path:        Applications/OBS
## Description: Automatically set up API and Web UI for OBS server, be warned, this will replace config files!
## Type:        ("yes" | "no")
## Default:     "no"
## Config:      OBS
#
# This is usually only enabled on the OBS Appliance
#
OBS_API_AUTOSETUP="yes"
#
# NOTE: all these options can be also declared in /etc/buildhost.config on each worker differently.
#

## Path:        Applications/OBS
## Description: define source server host to be used
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty setting will point to localhost:5352 by default
#
OBS_SRC_SERVER=""

## Path:        Applications/OBS
## Description: define repository server host to be used
## Type:        string
## Default:     ""
## Config:      OBS
#
# An empty setting will point to localhost:5252 by default
#
OBS_REPO_SERVERS=""

## Path:        Applications/OBS
## Description: define number of build instances
## Type:        integer
## Default:     0
## Config:      OBS
#
# 0 instances will automatically use the number of CPU's
#
OBS_WORKER_INSTANCES="0"

## Path:        Applications/OBS
## Description: define names of build instances for z/VM
## Type:        string
## Default:     ""
## Config:      OBS
#
# The names of the workers as defined in z/VM. These must have two minidisks
# assigned, and have a secondary console configured to the local machine:
# 0150 is the root device
# 0250 is the swap device
#
#OBS_WORKER_INSTANCE_NAMES="LINUX075 LINUX076 LINUX077"
OBS_WORKER_INSTANCE_NAMES=""

## Path:        Applications/OBS
## Description: The base directory, where sub directories for each worker will get created
## Type:        string
## Default:     ""
## Config:      OBS
#
#
OBS_WORKER_DIRECTORY=""

## Path:        Applications/OBS
## Description: The base for port numbers used by worker instances
## Type:        integer
## Default:     "0"
## Config:      OBS
#
# 0 means let the operating system assign a port number
#
OBS_WORKER_PORTBASE="0"

## Path:        Applications/OBS
## Description: Number of parallel compile jobs per worker
## Type:        integer
## Default:     "1"
## Config:      OBS
#
# this maps usually to "make -j1" during build
#
OBS_WORKER_JOBS="1"

## Path:        Applications/OBS
## Description: Run in test mode (build results will be ignore, no job blocking)
## Type:        ("yes" | "")
## Default:     ""
## Config:      OBS
#
OBS_WORKER_TEST_MODE=""

## Path:        Applications/OBS
## Description: define one or more labels for the build host.
## Type:        string
## Default:     ""
## Config:      OBS
#
# A label can be used to build specific packages only on dedicated hosts.
# For example for benchmarking.
#
OBS_WORKER_HOSTLABELS=""

## Path:        Applications/OBS
## Description: Register in SLP server
## Type:        ("yes" | "no")
## Default:     "yes"
## Config:      OBS
#
#
OBS_USE_SLP="yes"

## Path:        Applications/OBS
## Description: Use a common cache directory for downloaded packages
## Type:        string
## Default:     ""
## Config:      OBS
#
# Enable caching requires a given directory here. Be warned, content will be
# removed there !
#
OBS_CACHE_DIR=""

## Path:        Applications/OBS
## Description: Defines the package cache size
## Type:        size in MB
## Default:     ""
## Config:      OBS
#
# Set the size to 50% of the maximum usable size of this partition
#
OBS_CACHE_SIZE=""

## Path:        Applications/OBS
## Description: Defines the nice level of running workers
## Type:        integer
## Default:     18
## Config:      OBS
#
# Nicenesses range from -20 (most favorable  scheduling) to 19 (least
# favorable).
# Default to 18 as some testsuites depend on being able to switch to
# one priority below (19) _and_ having changed the numeric level
# (so going from 19-&gt;19 makes them fail).
#
OBS_WORKER_NICE_LEVEL=18

## Path:        Applications/OBS
## Description: Set used VM type by worker
## Type:        ("auto" | "xen" | "kvm" | "lxc" | "zvm" | "emulator:$arch" | "emulator:$arch:$script" | "none")
## Default:     "auto"
## Config:      OBS
#
#
OBS_VM_TYPE="auto"

## Path:        Applications/OBS
## Description: Set kernel used by worker (kvm)
## Type:        ("none" | "/boot/vmlinuz" | "/foo/bar/vmlinuz)
## Default:     "none"
## Config:      OBS
#
# For z/VM this is normally /boot/image
#
OBS_VM_KERNEL="none"

## Path:        Applications/OBS
## Description: Set initrd used by worker (kvm)
## Type:        ("none" | "/boot/initrd" | "/foo/bar/initrd-foo)
## Default:     "none"
## Config:      OBS
#
# for KVM, you have to create with (example for openSUSE 11.2):
#
# export rootfstype="ext4"
# mkinitrd -d /dev/null -m "ext4 binfmt_misc virtio_pci virtio_blk" -k vmlinuz-2.6.31.12-0.2-default -i initrd-2.6.31.12-0.2-default-obs_worker
#
# a working initrd file which includes virtio and binfmt_misc for OBS in order to work fine
#
# for z/VM, the build script will create a initrd at the given location if
# it does not yet exist.
#
OBS_VM_INITRD="none"

## Path:        Applications/OBS
## Description: Autosetup for XEN/KVM/TMPFS disk (root) - Filesize in MB
## Type:        integer
## Default:     "4096"
## Config:      OBS
#
#
OBS_VM_DISK_AUTOSETUP_ROOT_FILESIZE="4096"

## Path:        Applications/OBS
## Description: Autosetup for XEN/KVM disk (swap) - Filesize in MB
## Type:        integer
## Default:     "1024"
## Config:      OBS
#
#
OBS_VM_DISK_AUTOSETUP_SWAP_FILESIZE="1024"

## Path:        Applications/OBS
## Description: Filesystem to use for autosetup {none,ext4}=ext4, ext3=ext3
## Type:        string
## Default:     "ext3"
## Config:      OBS
#
#
OBS_VM_DISK_AUTOSETUP_FILESYSTEM="ext3"

## Path:        Applications/OBS
## Description: Filesystem mount options to use for autosetup
## Type:        string
## Default:     ""
## Config:      OBS
#
#
OBS_VM_DISK_AUTOSETUP_MOUNT_OPTIONS=""

## Path:        Applications/OBS
## Description: Enable build in memory
## Type:        ("yes" | "")
## Default:     ""
## Config:      OBS
#
# WARNING: this requires much memory!
#
OBS_VM_USE_TMPFS=""

## Path:        Applications/OBS
## Description: Memory allocated for each VM (512) if not set
## Type:        integer
## Default:     ""
## Config:      OBS
#
#
OBS_INSTANCE_MEMORY=""

## Path:        Applications/OBS
## Description: Enable storage auto configuration
## Type:        ("yes" | "")
## Default:     ""
## Config:      OBS
#
# WARNING: this may destroy data on your hard disk !
# This is usually only used on mass deployed worker instances
#
OBS_STORAGE_AUTOSETUP="yes"

## Path:        Applications/OBS
## Description: Setup LVM via obsstoragesetup
## Type:        ("take_all" | "use_obs_vg" | "none")
## Default:     "use_obs_vg"
## Config:      OBS
#
# take_all: WARNING: all LVM partitions will be used and all data erased !
# use_obs_vg:  A lvm volume group named "OBS" will be re-setup for the workers.
#
OBS_SETUP_WORKER_PARTITIONS="use_obs_vg"

## Path:        Applications/OBS
## Description: Size in MB when creating LVM partition for cache partition
## Type:        integer
## Default:     ""
## Config:      OBS
#
#
OBS_WORKER_CACHE_SIZE=""

## Path:        Applications/OBS
## Description: Size in MB when creating LVM partition for each worker root partition
## Type:        integer
## Default:     ""
## Config:      OBS
#
#
OBS_WORKER_ROOT_SIZE=""

## Path:        Applications/OBS
## Description: Size in MB when creating LVM partition for each worker swap partition
## Type:        integer
## Default:     ""
## Config:      OBS
#
#
OBS_WORKER_SWAP_SIZE=""

## Path:        Applications/OBS
## Description: URL to a proxy service for caching binaries used by worker
## Type:        string
## Default:     ""
## Config:      OBS
#
#
OBS_WORKER_BINARIES_PROXY=""

## Path:        Applications/OBS
## Description: URL to a ssh pub key to allow root user login
## Type:        string
## Default:     ""
## Config:      OBS
#
# This is usually used on mass (PXE) deployed workers)
#
OBS_ROOT_SSHD_KEY_URL=""

## Path:        Applications/OBS
## Description: URL to a script to be downloaded and executed
## Type:        string
## Default:     ""
## Config:      OBS
#
# This is a hook for doing special things in your setup at boot time
#
OBS_WORKER_SCRIPT_URL=""</screen>
   </sect3>
   <sect3 xml:id="bsconfig-pm">
    <title>BSConfig.pm</title>
    <para>This file is a perl module used by most back-end scripts, it
     mainly defines global variables. Since it is a perl module, after changes
     the back-end servers need to be restarted to become aware of the
     changes.</para>
    <warning>
     <para>If there is a Perl syntax error in this file, the services will
      not start. Most likely you forgot the semicolon on the end of a
      statement.</para>
    </warning>
    <table frame="all" rowsep="1" colsep="1">
     <title><filename>BSConfig.pm</filename> Variables</title>
     <tgroup cols="4">
      <colspec colname="col_1" colwidth="25*"/>
      <colspec colname="col_2" colwidth="25*"/>
      <colspec colname="col_3" colwidth="25*"/>
      <colspec colname="col_4" colwidth="25*"/>
      <thead>
       <row>
        <entry align="left" valign="top"> Variable </entry>
        <entry align="left" valign="top"> Description </entry>
        <entry align="left" valign="top"> Values <literal>default</literal>
        </entry>
        <entry align="left" valign="top"> Remarks</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="left" valign="top">
         <para>$hostname</para>
        </entry>
        <entry align="left" valign="top">
         <para>FQDN of the back-end host</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>leave as it is</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$ip</para>
        </entry>
        <entry align="left" valign="top">
         <para>IP address of the back-end host</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>leave as it is</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$frontend</para>
        </entry>
        <entry align="left" valign="top">
         <para>FQDN of the front-end host</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>undef</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>set only if the front-end runs on another host</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$ipaccess</para>
        </entry>
        <entry align="left" valign="top">
         <para>Map of IP access rules</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>Add all hosts if partition are used</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$srcserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the source server</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'http://$hostname: 5352'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$reposerver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the repo server</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'http://$hostname: 5252'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>partition specific</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$serviceserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the service server</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'http://$hostname: 5152'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$workersrcserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the source server</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional for worker access</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$workerreposerver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the repo server</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional for worker access</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$clouduploadserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the cloud upload server</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'http://$hostname: 5452'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$servicedir</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to the service scripts</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>/usr/lib/obs/service/</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$servicetempdir</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to service temp dir</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>/var/tmp/</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$serviceroot</para>
        </entry>
        <entry align="left" valign="top">
         <para>Prefix to servicedir</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$service_maxchild</para>
        </entry>
        <entry align="left" valign="top">
         <para>Maximum number of concurrent jobs for source
          service</para>
        </entry>
        <entry align="left" valign="top">
         <para>integer</para>
        </entry>
        <entry align="left" valign="top">
         <para>unlimited if not set</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$gpg_standard_key</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to the standard sign key</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$hermesserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>URL of the notification server</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$hermesnamespace</para>
        </entry>
        <entry align="left" valign="top">
         <para>Namespace for the notifications</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$notification _plugin</para>
        </entry>
        <entry align="left" valign="top">
         <para>notification plugins</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>@reposervers</para>
        </entry>
        <entry align="left" valign="top">
         <para>List of reposervers</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>("http://$hostname: 5252")</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$bsdir</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to the back-end directory</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>/srv/obs</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$bsuser</para>
        </entry>
        <entry align="left" valign="top">
         <para>OS user running the back-end</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>obsrun</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$bsgroup</para>
        </entry>
        <entry align="left" valign="top">
         <para>OS group running the back-end</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>obsrun</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$bsquotafile</para>
        </entry>
        <entry align="left" valign="top">
         <para>Package quota for projects</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$sched_asyncmode</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use asynchronous scheduler</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>Avoid issues with remote projects on slow networks</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$sched_startupmode</para>
        </entry>
        <entry align="left" valign="top">
         <para>Cold start mode</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>0</literal> 1 2</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$disable_data_sync</para>
        </entry>
        <entry align="left" valign="top">
         <para>fdatasync</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>may cause data corruption</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$rundir</para>
        </entry>
        <entry align="left" valign="top">
         <para>back-end communication</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>$bsdir/run</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$logdir</para>
        </entry>
        <entry align="left" valign="top">
         <para>log directory</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>$bsdir/log</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$nosharedtrees</para>
        </entry>
        <entry align="left" valign="top">
         <para>Shared trees 0=shared 1=not shared 2=not shared with
          fallback</para>
        </entry>
        <entry align="left" valign="top">
         <para>0 1 <literal>2</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>optional for non-ACL systems, should be set for access
          control</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$packtrack</para>
        </entry>
        <entry align="left" valign="top">
         <para>enable binary release tracking</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>[]</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$limit_projects</para>
        </entry>
        <entry align="left" valign="top">
         <para>limit visibility of projects for some architectures</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>optional</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$relsync_pool</para>
        </entry>
        <entry align="left" valign="top">
         <para>allow separation of releasenumber syncing per
          architecture</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$stageserver</para>
        </entry>
        <entry align="left" valign="top">
         <para>stage server</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>rsync URI</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$stageserver_sync</para>
        </entry>
        <entry align="left" valign="top">
         <para>Extra stage sync server</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>rsync URI</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$sign</para>
        </entry>
        <entry align="left" valign="top">
         <para>Path to sign script</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$sign_project</para>
        </entry>
        <entry align="left" valign="top">
         <para>call sign with --project &lt;project&gt;</para>
        </entry>
        <entry align="left" valign="top">
         <para>0 <literal>1</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$keyfile</para>
        </entry>
        <entry align="left" valign="top">
         <para>Global sign key</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$localarch</para>
        </entry>
        <entry align="left" valign="top">
         <para>Local architecture for product building</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$buildlog_maxsize</para>
        </entry>
        <entry align="left" valign="top">
         <para>worker max buildlog size</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'500 * 1000000'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>in bytes</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$buildlog_maxidle</para>
        </entry>
        <entry align="left" valign="top">
         <para>Time with no changes in the buildlog will kill the
          job</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'8 * 3600'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>in sec</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$xenstore_maxsize</para>
        </entry>
        <entry align="left" valign="top">
         <para>xenstore size</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'20 * 1000000'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>current XEN has no xenstore anymore</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$gettimeout</para>
        </entry>
        <entry align="left" valign="top">
         <para>Max timeout for get</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>'1 * 3600'</literal>
         </para>
        </entry>
        <entry align="left" valign="top">
         <para>in sec</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$workerhostcheck</para>
        </entry>
        <entry align="left" valign="top">
         <para>check script for worker</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$powerhosts</para>
        </entry>
        <entry align="left" valign="top">
         <para>Worker with more resources</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>obsolete use constraints</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$powerpkgs</para>
        </entry>
        <entry align="left" valign="top">
         <para>packages which need workers with more resources</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>obsolete use constraints</para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$norootexceptions</para>
        </entry>
        <entry align="left" valign="top">
         <para>List of packages need to build as root</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$old_style_services</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use old style source service handling</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>0</literal> 1</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$partition</para>
        </entry>
        <entry align="left" valign="top">
         <para>Current partition</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="distributed-setup"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$partitioning</para>
        </entry>
        <entry align="left" valign="top">
         <para>Partition project mapping</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="distributed-setup"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$partitionservers</para>
        </entry>
        <entry align="left" valign="top">
         <para>Partition server mapping</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="distributed-setup"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$dispatch_adjust</para>
        </entry>
        <entry align="left" valign="top">
         <para>Adjust dispatch priority</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="dispatch-priorities-dispatch-adjust-array"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$publishedhook_use _regex</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use regular expressions in publish hook map</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>0</literal> 1</para>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="publisher-hooks"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$publishedhook</para>
        </entry>
        <entry align="left" valign="top">
         <para>Publish hook map</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="publisher-hooks"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$unpublishedhook_use _regex</para>
        </entry>
        <entry align="left" valign="top">
         <para>Use regular expressions in unpublish hook map</para>
        </entry>
        <entry align="left" valign="top">
         <para><literal>0</literal> 1</para>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="unpublisher-hooks"/>
         </para>
        </entry>
       </row>
       <row>
        <entry align="left" valign="top">
         <para>$unpublishedhook</para>
        </entry>
        <entry align="left" valign="top">
         <para>Unpublish hook map</para>
        </entry>
        <entry align="left" valign="top">
         <para/>
        </entry>
        <entry align="left" valign="top">
         <para>see <xref linkend="unpublisher-hooks"/>
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>Example BSConfig.pm</para>
    <screen>#
# Copyright (c) 2006, 2007 Michael Schroeder, Novell Inc.
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2 as
# published by the Free Software Foundation.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program (see the file COPYING); if not, write to the
# Free Software Foundation, Inc.,
# 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA
#
################################################################
#
# Open Build Service Configuration
#

package BSConfig;

use Net::Domain;
use Socket;

my $hostname = Net::Domain::hostfqdn() || 'localhost';
# IP corresponding to hostname (only used for $ipaccess); fallback to localhost since inet_aton may fail to resolve at shutdown.
my $ip = quotemeta inet_ntoa(inet_aton($hostname) || inet_aton("localhost"));

my $frontend = undef; # FQDN of the Web UI/API server if it's not $hostname

# If defined, restrict access to the backend servers (bs_repserver, bs_srcserver, bs_service)
our $ipaccess = {
   '127\..*' =&gt; 'rw', # only the localhost can write to the backend
   "^$ip" =&gt; 'rw',    # Permit IP of FQDN
   '.*' =&gt; 'worker',  # build results can be delivered from any client in the network
};

# IP of the Web UI/API Server (only used for $ipaccess)
if ($frontend) {
  my $frontendip = quotemeta inet_ntoa(inet_aton($frontend) || inet_aton("localhost"));
  $ipaccess-&gt;{$frontendip} = 'rw' ; # in dotted.quad format
}

# Also change the SLP reg files in /etc/slp.reg.d/ when you touch hostname or port
our $srcserver = "http://$hostname:5352";
our $reposerver = "http://$hostname:5252";
our $serviceserver = "http://$hostname:5152";

# you can use different ports for worker connections
#our $workersrcserver = "http://$hostname:5353";
#our $workerreposerver = "http://$hostname:5253";

our $servicedir = "/usr/lib/obs/service/";
#our $servicetempdir = "/var/temp/";
#our $serviceroot = "/opt/obs/MyServiceSystem";

# Maximum number of concurrent jobs for source service
#our $service_maxchild = 20;

our $gpg_standard_key = "/srv/obs/obs-default-gpg.asc";
# optional notification service:
#our $hermesserver = "http://$hostname/hermes";
#our $hermesnamespace = "OBS";
#
# Notification Plugin, multiple plugins supported, separated by space
#our $notification_plugin = "notify_hermes notify_rabbitmq";
#

# For the workers only, it is possible to define multiple repository servers here.
# But only one source server is possible yet.
our @reposervers = ("http://$hostname:5252");

# Package defaults
our $bsdir = '/srv/obs';
our $bsuser = 'obsrun';
our $bsgroup = 'obsrun';
#our $bsquotafile = '/srv/obs/quota.xml';

# Use asynchronus scheduler. This avoids hanging schedulers on remote projects,
# when the network is slow or broken. This will become the default in future
# our $sched_asyncmode = 1;

# Define how the scheduler does a cold start. The default (0) is to request the
# data for all packages, (1) means that only the non-remote packages are fetched,
# (2) means that all of the package data fetches get delayed.
# our $sched_startupmode = 0;

# Disable fdatasync calls, increases the speed, but may lead to data
# corruption on system crash when the filesystem does not guarantees
# data write before rename.
# It is esp. required on XFS filesystem.
# It is safe to be disabled on ext4 and btrfs filesystems.
#our $disable_data_sync = 1;

# Package rc script / backend communication + log files
our $rundir = "$bsdir/run";
our $logdir = "$bsdir/log";

# optional for non-acl systems, should be set for access control
# 0: trees are shared between projects (built-in default)
# 1: trees are not shared (only usable for new installations)
# 2: new trees are not shared, in case of a missing tree the shared
#    location is also tried (package default)
our $nosharedtrees = 2;

# enable binary release tracking by default for release projects
our $packtrack = [];

# optional: limit visibility of projects for some architectures
#our $limit_projects = {
# "ppc" =&gt; [ "openSUSE:Factory", "FATE" ],
# "ppc64" =&gt; [ "openSUSE:Factory", "FATE" ],
#};

# optional: allow seperation of releasnumber syncing per architecture
# one counter pool for all ppc architectures, one for i586/x86_64,
# arm archs are separated and one for the rest in this example
our $relsync_pool = {
 "local" =&gt; "local",
 "i586" =&gt; "i586",
 "x86_64" =&gt; "i586",
 "ppc" =&gt; "ppc",
 "ppc64" =&gt; "ppc",
 "ppc64le" =&gt; "ppc",
 "mips" =&gt; "mips",
 "mips64" =&gt; "mips",
 "mipsel" =&gt; "mipsel",
 "mips64el" =&gt; "mipsel",
 "aarch64"  =&gt; "arm",
 "aarch64_ilp32"  =&gt; "arm",
 "armv4l"  =&gt; "arm",
 "armv5l"  =&gt; "arm",
 "armv6l"  =&gt; "arm",
 "armv6hl" =&gt; "arm",
 "armv7l"  =&gt; "arm",
 "armv7hl" =&gt; "arm",
 "armv5el" =&gt; "armv5el", # they do not exist
 "armv6el" =&gt; "armv6el",
 "armv7el" =&gt; "armv7el",
 "armv8el" =&gt; "armv8el",
 "sparcv9" =&gt; "sparcv9",
 "sparc64" =&gt; "sparcv9",
};

#No extra stage server sync
#our $stageserver = 'rsync://127.0.0.1/put-repos-main';
#our $stageserver_sync = 'rsync://127.0.0.1/trigger-repos-sync';

#No package signing server
our $sign = "/usr/bin/sign";
#Extend sign call with project name as argument "--project $NAME"
#our $sign_project = 1;
#Global sign key
our $keyfile = "/srv/obs/obs-default-gpg.asc";

# Use a special local arch for product building
# our $localarch = "x86_64";

# config options for the bs_worker
#
#our buildlog_maxsize = 500 * 1000000;
#our buildlog_maxidle =   8 * 3600;
#our xenstore_maxsize =  20 * 1000000;
#our gettimeout =         1 * 3600;
#
# run a script to check if the worker is good enough for the job
#our workerhostcheck = 'my_check_script';
#
# Allow to build as root, exceptions per package
# the keys are actually anchored regexes
# our $norootexceptions = { "my_project/my_package" =&gt; 1, "openSUSE:Factory.*/installation-images" =&gt; 1 };

# Use old style source service handling
# our $old_style_services = 1;

###
# Optional support to split the binary backend. This can be used on large servers
# to separate projects for better scalability.
# There is still just one source server, but there can be multiple servers which
# run each repserver, schedulers, dispatcher, warden and publisher
#
# This repo service is the 'home' server for all home:* projects. This and the
# $reposerver setting must be different on the binary backend servers.
# our $partition = 'home';
#
# this defines how the projects are split. All home: projects are hosted
# on an own server in this example. Order is important.
# our $partitioning = [ 'home:' =&gt; 'home',
#                       '.*'    =&gt; 'main',
#                     ];
#
# our $partitionservers = { 'home' =&gt; 'http://home-backend-server:5252',
#                           'main' =&gt; 'http://main-backend-server:5252',
#                         };

# Publish hooks
our $publishedhook_use_regex = 1;
our $publishedhook = {
    "Product\/SLES12"     =&gt; "/usr/local/bin/script2run_sles12",
    "Product\/SLES11.*"   =&gt; "/usr/local/bin/script2run_sles11",
};


# host specific configs
my $hostconfig = __FILE__;
$hostconfig =~ s/[^\/]*$/bsconfig.$hostname/;
if (-r $hostconfig) {
  print STDERR "reading $hostconfig...\n";
  require $hostconfig;
}

1;</screen>
   </sect3>
  </sect2>
 </sect1>
 <sect1 xml:id="log-files">
  <title>Log Files</title>
  <sect2 xml:id="log-files-frontend">
   <title>Front-end</title>
   <para>The front-end log files are found under
     <emphasis>/srv/www/obs/api/log</emphasis>.</para>
   <para>The following front-end log files exist:</para>
   <itemizedlist>
    <listitem>
     <para> apache_access.log - apache requests </para>
    </listitem>
    <listitem>
     <para> apache_error.log - errors from apache </para>
    </listitem>
    <listitem>
     <para> backend_access.log - API  backend requests </para>
    </listitem>
    <listitem>
     <para> clockworkd.clock.output  timer event log </para>
    </listitem>
    <listitem>
     <para> delayed_job.log  delayed job log </para>
    </listitem>
    <listitem>
     <para> production.log main ruby log </para>
    </listitem>
    <listitem>
     <para> production.searchd.log - search daemon log </para>
    </listitem>
    <listitem>
     <para> production.searchd.query.log - search request logs </para>
    </listitem>
   </itemizedlist>
  </sect2>
  <sect2 xml:id="log-files-backend">
   <title>Back-end</title>
   <para>The back-end log files are found by default under
     <emphasis>/srv/obs/log/</emphasis>.</para>
   <para>The following back-end log files exist:</para>
   <itemizedlist>
    <listitem>
     <para> dispatcher.log - dispatcher log </para>
    </listitem>
    <listitem>
     <para> dodup.log - download on demand log (since 2.7) </para>
    </listitem>
    <listitem>
     <para> publisher.log - publisher log </para>
    </listitem>
    <listitem>
     <para> rep_server.log - repo server log </para>
    </listitem>
    <listitem>
     <para> scheduler_&lt;arch&gt;.log - scheduler log for each architecture
     </para>
    </listitem>
    <listitem>
     <para> signer.log - sign service log </para>
    </listitem>
    <listitem>
     <para> src_server.log - source server log </para>
    </listitem>
    <listitem>
     <para> src_service.log - source service daemon log </para>
    </listitem>
    <listitem>
     <para> warden.log - warden log </para>
    </listitem>
    <listitem>
     <para> clouduploadserver.log - cloud upload server log </para>
    </listitem>
    <listitem>
     <para> clouduploadworker.log - cloud upload worker log </para>
    </listitem>
   </itemizedlist>
   <para>The following log files for the upload jobs exist inside the <emphasis>/srv/obs/cloudupload</emphasis> directory (also linked in <emphasis>/bs/cloudupload</emphasis>):</para>
   <itemizedlist>
    <listitem>
     <para> &lt;job_id&gt;.log - log files for undone upload jobs</para>
    </listitem>
    <listitem>
     <para> done/&lt;job_id&gt;.log - log files for already finished upload jobs</para>
    </listitem>
   </itemizedlist>
  </sect2>
 </sect1>
 <sect1 xml:id="src-obs-tree">
  <title><filename>/srv/obs</filename> Tree</title>
  <para>The default back-end data directory is located under
    <emphasis>/srv/obs/</emphasis>. Here are a bunch of subdirectories used for
   communication between the different server, to store data, status
   information and logs. Here is one file <emphasis role="strong"
     ><emphasis>configuration.xml</emphasis></emphasis> in the top directory,
   which stores the global OBS configuration for the back-end. You should not
   modify this file directly, but use the API /configuration interface instead,
   since this information needs to kept in sync with the front-end.</para>
  <sect2 xml:id="src-obs-tree-build-directory">
   <title><filename>build</filename> Directory</title>
   <para>In this subdirectory managed by the repo server daemon, all
    repository data, metadata and build results are stored in a hierarchical
    tree.</para>
   <para>Example build directory tree of a binary imported distribution
    (OpenSUSE:13.2) and a small test project with 3 packages:</para>
   <screen> openSUSE:13.2
    standard
        i586
           :full
        x86_64
            :full
 Test1
    os13.2
        i586
           :full
           :logfiles.fail
           :logfiles.success
           :meta
           :repo
           rsync
           srtp
           wget
        x86_64
            :full
            :logfiles.fail
            :logfiles.success
            :meta
            :repo
            rsync
            srtp
            wget</screen>
  </sect2>
  <sect2 xml:id="src-obs-tree-cloudupload-directory">
   <title><filename>cloudupload</filename> Directory</title>
   <para>Info for cloud upload jobs is stored here, it has a subdir named <emphasis>done</emphasis> for storing the already finished jobs.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-db-directory">
   <title><filename>db</filename> Directory</title>
   <para>Back-end database root directory use by the source server, repo
    server scheduler and publisher. Nobody should touch this.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-diffcache-directory">
   <title><filename>diffcache</filename> Directory</title>
   <para>Cache for source server compare operations.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-events-directory">
   <title><filename>events</filename> Directory</title>
   <para>Communication between services.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-info-directory">
   <title><filename>info</filename> Directory</title>
   <para>Scheduler information managed by the scheduler and used by the repo
    server.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-jobs-directory">
   <title><filename>jobs</filename> Directory</title>
   <para>The build jobs are stored in the /srv/obs/jobs directory. They are
    organized bybuild architecture:</para>
   <screen>jobs
 armv7l
 i586
 load
 x86_64
     Release:Stable::SLE-12_GA::CI-demo-36db80552b735e193dced13f058f866f</screen>
   <para>The jobs/load file contains statistical data about the build
    jobs.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-log-directory">
   <title><filename>log</filename> Directory</title>
   <para>Contains the log files of the back-end daemons.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-projects-directory">
   <title><filename>projects</filename> Directory</title>
   <para>Contains the project hierarchy and metadata under revision
    control.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-remotecache-directory">
   <title><filename>remotecache</filename> Directory</title>
   <para>Cache for remote repository information.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-repos-directory">
   <title><filename>repos</filename> Directory</title>
   <para>Directory managed by the publisher to collect build results, also
    used by the repo server and scheduler to find build results.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-repos-sync-directory">
   <title><filename>repos_sync</filename> Directory</title>
   <para>Directory with files pointing to the project root directories,
    helper for publisher rsync.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-run-directory">
   <title><filename>run</filename> Directory</title>
   <para>State and lock information for the back-end daemons</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-sources-directory">
   <title><filename>sources</filename> Directory</title>
   <para>All package sources under revision control in one directory per
    package, managed by the source server. Package sources are by default
    deduplicated across all projects, as long a source file has the same MD5
    sum, it is only stored once. A pseudo <emphasis role="strong"
      ><emphasis>'_project'</emphasis></emphasis> package exist in the
    directory containing the project metadata revisions. <emphasis
     role="strong"><emphasis>':service'</emphasis></emphasis> and <emphasis
     role="strong"><emphasis>':upload'</emphasis></emphasis> are temporary
    directories used by the source server.</para>
   <para>Example sources directory structure:</para>
   <screen>sources/
 CI-demo
[...]
 srtp
 test1
 _project
 :service
 :upload</screen>
  </sect2>
  <sect2 xml:id="src-obs-tree-trees-directory">
   <title><filename>trees</filename> Directory</title>
   <para>Revision control data for project and packages, managed by the
    source server.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-upload-directory">
   <title><filename>upload</filename> Directory</title>
   <para>Temporary directory for uploading files for other back-end
    components.</para>
  </sect2>
  <sect2 xml:id="src-obs-tree-workers-directory">
   <title><filename>workers</filename> Directory</title>
   <para>Worker information</para>
  </sect2>
 </sect1>
 <sect1 xml:id="meta-data">
  <title>Metadata</title>
  <sect2 xml:id="meta-data-obs-revision-control">
   <title>&obsa; Revision Control</title>
   <para>This section gives a short generic overview how the revision
    information are stored in the OBS back-end for packages and projects. The
    OBS back-end stores all files in a light weight content based hierarchical
    tree. Each file is hashed (with MD5) and stored with the hash as part of
    the filename under the <emphasis>/srv/obs/tree</emphasis> or
     <emphasis>/srv/obs/sources</emphasis> directories. The revision
    information is stored in separate files by the Source Server in the
     <emphasis>/srv/obs/projects directory</emphasis>.</para>
   <sect3 xml:id="meta-data-obs-revision-control-obs-revision-control-files">
    <title>OBS revision control files</title>
    <para>The revision information is stored in simple CSV like file format
     with a bar (|) as delimiter between the 8 columns. The files do have the
     extension <emphasis>.rev</emphasis> for package/project revision data and
      <emphasis>.mref</emphasis> for meta revision data. The hash then points
     to a &lt;hash&gt;-MD5SUMS file in the <emphasis>/srv/obs/tree/</emphasis>
     directories which have the file list with MD5 hashes of this revision. The
     hashes in this file list are pointing to the source files in the
      <emphasis>/srv/obs/sources</emphasis> tree.</para>
    <para>An example revision file:</para>
    <screen>1|1|56cdd3adb778089d1fcc49b92bb93e5b|0.9|1464005086|user4|initial version|
2|2|fe7aa1ade5c9d005de738c234c90bc90|0.9|1464005304|user4|fix spec file|
3|1|72c7986e694f45ab1a62779e64e92a8f|1.0|1464005339|user4|new version|
4|2|699e9931e6f167d78e65bbe5853f592f|1.0|1464006221|user4|add patch file|
5|1|0cfc3a2297f38d2aa9d8d0e98fc22a38|1.1|1464007797|user4|new version|</screen>
    <table frame="all" rowsep="1" colsep="1">
     <title>The 8 Columns</title>
     <?dbhtml table-width="80%"?>
     <?dbfo table-width="80%"?>
     <?dblatex table-width="80%"?>
     <tgroup cols="4">
      <colspec colname="col_1" colwidth="85*"/>
      <colspec colname="col_2" colwidth="85*"/>
      <colspec colname="col_3" colwidth="85*"/>
      <colspec colname="col_4" colwidth="85*"/>
      <thead>
       <row>
        <entry align="center" valign="middle"> Column </entry>
        <entry align="center" valign="middle"> Content </entry>
        <entry align="center" valign="middle"> XML tag </entry>
        <entry align="center" valign="middle"> may empty</entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry align="center" valign="middle">
         <para>1</para>
        </entry>
        <entry align="center" valign="middle">
         <para>revision number</para>
        </entry>
        <entry align="center" valign="middle">
         <para>ref</para>
        </entry>
        <entry align="center" valign="middle">
         <para>no</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>2</para>
        </entry>
        <entry align="center" valign="middle">
         <para>version revision number</para>
        </entry>
        <entry align="center" valign="middle">
         <para>vref</para>
        </entry>
        <entry align="center" valign="middle">
         <para>yes</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>3</para>
        </entry>
        <entry align="center" valign="middle">
         <para>hash</para>
        </entry>
        <entry align="center" valign="middle">
         <para>srcmd5</para>
        </entry>
        <entry align="center" valign="middle">
         <para>no</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>4</para>
        </entry>
        <entry align="center" valign="middle">
         <para>version</para>
        </entry>
        <entry align="center" valign="middle">
         <para>version</para>
        </entry>
        <entry align="center" valign="middle">
         <para>yes</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>5</para>
        </entry>
        <entry align="center" valign="middle">
         <para>time stamp</para>
        </entry>
        <entry align="center" valign="middle">
         <para>time</para>
        </entry>
        <entry align="center" valign="middle">
         <para>no</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>6</para>
        </entry>
        <entry align="center" valign="middle">
         <para>user</para>
        </entry>
        <entry align="center" valign="middle">
         <para>user</para>
        </entry>
        <entry align="center" valign="middle">
         <para>no</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>7</para>
        </entry>
        <entry align="center" valign="middle">
         <para>commit message</para>
        </entry>
        <entry align="center" valign="middle">
         <para>comment</para>
        </entry>
        <entry align="center" valign="middle">
         <para>yes</para>
        </entry>
       </row>
       <row>
        <entry align="center" valign="middle">
         <para>8</para>
        </entry>
        <entry align="center" valign="middle">
         <para>request id</para>
        </entry>
        <entry align="center" valign="middle">
         <para>requestid</para>
        </entry>
        <entry align="center" valign="middle">
         <para>yes</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     Depending on the target (package, project or metadata)
     used, fields can be empty or have special values, for example,
     <literal>unknown</literal> for the version.
    </para>
    <para>Example MD5SUMS file</para>
    <screen>/srv/obs # cat trees/Test1/package1/56cdd3adb778089d1fcc49b92bb93e5b-MD5SUMS
0a17daaa913df9e50ee65e83a1898363  package1.spec
1f810b3521242a98333b7bbf6b2b7ef7  test1.sh</screen>
   </sect3>
   <sect3 xml:id="meta-data-obs-revision-control-obs-revision-api">
    <title>&obsa; Revision API</title>
    <para>The revision info can be retrieved via API calls for the specific
     package, for example, using
      <literal>/source/&lt;project&gt;/&lt;package&gt;/_history</literal>.</para>
    <para>Specific revisions of files can be retrieved with the optional
     "rev=N" parameter, for example,
      <emphasis>/source/&lt;project&gt;/&lt;package&gt;/&lt;file&gt;?rev=N</emphasis>.</para>
    <para>On PUT and POST methods for files the optional
     "comment=some+comment" can be used to set a commit message.</para>
   </sect3>
  </sect2>
  <sect2 xml:id="meta-data-project-meta-data">
   <title>Project Metadata</title>
   <para>Project metadata are XML files containing the meta project
    information, such as title, description, related user and groups with
    roles, build settings, repository settings, publish settings, debug
    settings and more.</para>
   <table frame="all" rowsep="1" colsep="1">
    <title>Project Meta XML</title>
    <tgroup cols="3">
     <colspec colname="col_1" colwidth="25*"/>
     <colspec colname="col_2" colwidth="25*"/>
     <colspec colname="col_3" colwidth="50*"/>
     <thead>
      <row>
       <entry align="left" valign="top"> XML tag </entry>
       <entry align="left" valign="top"> Attributes</entry>
       <entry align="left" valign="top"> Content</entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry align="left" valign="top">
        <para>project</para>
       </entry>
       <entry align="left" valign="top">
        <para>name</para>
       </entry>
       <entry align="left" valign="top">
        <para>project name</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>title</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>Short description</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>description</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>Developer information</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>person</para>
       </entry>
       <entry align="left" valign="top">
        <para>userid</para>
       </entry>
       <entry align="left" valign="top">
        <para>login name</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>person</para>
       </entry>
       <entry align="left" valign="top">
        <para>role</para>
       </entry>
       <entry align="left" valign="top">
        <para>role (maintainer, bugowner, )</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>group</para>
       </entry>
       <entry align="left" valign="top">
        <para>groupid</para>
       </entry>
       <entry align="left" valign="top">
        <para>group name</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>group</para>
       </entry>
       <entry align="left" valign="top">
        <para>role</para>
       </entry>
       <entry align="left" valign="top">
        <para>role (maintainer, bugowner, )</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>devel</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>An optional devel project</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>build</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>optional build flags</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>publish</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>optional publish flags</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>useforbuild</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>optional useforbuild flags</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>debuginfo</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>optional debuginfo flags</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>binarydownload</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>optional binarydownload flags</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>repository</para>
       </entry>
       <entry align="left" valign="top">
        <para>name</para>
       </entry>
       <entry align="left" valign="top">
        <para>name of the repository for build results</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>repository path</para>
       </entry>
       <entry align="left" valign="top">
        <para>project</para>
       </entry>
       <entry align="left" valign="top">
        <para>name of the source project for remaining build
         requires</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>repository path</para>
       </entry>
       <entry align="left" valign="top">
        <para>repository</para>
       </entry>
       <entry align="left" valign="top">
        <para>name of repository in the source project</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>repository arch</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>architecture name</para>
       </entry>
      </row>
      <row>
       <entry align="left" valign="top">
        <para>remoteurl</para>
       </entry>
       <entry align="left" valign="top">
        <para/>
       </entry>
       <entry align="left" valign="top">
        <para>path to a remote OBS API for interconnect</para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
   <para>Example project metadata:</para>
   <screen>&lt;project name="Test11"&gt;
  &lt;title&gt;Test project 11&lt;/title&gt;
  &lt;description&gt;Project for demo&lt;/description&gt;
  &lt;person userid="Admin" role="maintainer"/&gt;
  &lt;person userid="user0" role="maintainer"/&gt;
  &lt;group groupid="obsprj3" role="maintainer"/&gt;
  &lt;repository name="openSUSE_13.2"&gt;
    &lt;path project="openSUSE.org:openSUSE:13.2" repository="standard"/&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</screen>
  </sect2>
  <sect2 xml:id="meta-data-package-meta-data">
   <title>Package Metadata</title>
   <para>XML file about package meta information, like Title, description,
    related user and groups with roles, build settings, publish settings, debug
    settings and more. Most XML tags are the same as for projects.</para>
   <para>Example package metadata:</para>
   <screen>&lt;package name="test1" project="Test11"&gt;
  &lt;title&gt;A test package for learning&lt;/title&gt;
  &lt;description&gt;An example test package for learning.&amp;#13;
&lt;/description&gt;
  &lt;person userid="user5" role="bugowner"/&gt;
  &lt;person userid="user5" role="maintainer"/&gt;
  &lt;build&gt;
    &lt;enable repository="openSUSE_13.2"/&gt;
  &lt;/build&gt;
  &lt;publish&gt;
    &lt;disable repository="openSUSE_13.2"/&gt;
  &lt;/publish&gt;
  &lt;debuginfo&gt;
    &lt;disable/&gt;
  &lt;/debuginfo&gt;
&lt;/package&gt;</screen>
  </sect2>
  <sect2 xml:id="meta-data-attribute-meta-data">
   <title>Attribute Metadata</title>
   <para>Attributes can be used to add special information to packages.
    Attributes can be used to trigger special actions.</para>
   <para>Example attribute data:</para>
   <screen>&lt;attributes&gt;
  &lt;attribute name="Issues" namespace="OBS"/&gt;
  &lt;attribute name="AutoCleanup" namespace="OBS"&gt;
    &lt;value&gt;2016-06-30 00:00:00&lt;/value&gt;
  &lt;/attribute&gt;
  &lt;attribute name="AutoCleanup" namespace="OBS"&gt;
    &lt;value&gt;&lt;/value&gt;
  &lt;/attribute&gt;
&lt;/attributes&gt;</screen>
  </sect2>
  <sect2 xml:id="meta-data-job-files">
   <title>Job Files</title>
   <para>Jobs are stored by the scheduler in the
     <filename>/srv/obs/jobs</filename> directory and contain the build setup
    information for the package, for example, a reference to the exact source version,
    build dependencies, build repository information, timestamps.</para>
   <para>Sample job file:</para>
   <screen>&lt;buildinfo project="Release:Stable" repository="SLE-12_GA" package="CI-demo"
srcserver="http://obs.b1-systems.de:5352"
reposerver="http://obs.b1-systems.de:5252"&gt;
  &lt;job&gt;Release:Stable::SLE-12_GA::
 CI-demo-36db80552b735e193dced13f058f866f&lt;/job&gt;
  &lt;arch&gt;x86_64&lt;/arch&gt;
  &lt;srcmd5&gt;36db80552b735e193dced13f058f866f&lt;/srcmd5&gt;
  &lt;verifymd5&gt;36db80552b735e193dced13f058f866f&lt;/verifymd5&gt;
  &lt;rev&gt;2&lt;/rev&gt;
  &lt;disturl&gt;obs://b1-systems.de/Release:Stable/SLE-12_GA/
  36db80552b735e193dced13f058f866f-CI-demo&lt;/disturl&gt;
  &lt;reason&gt;new build&lt;/reason&gt;
  &lt;needed&gt;0&lt;/needed&gt;
  &lt;revtime&gt;1461077600&lt;/revtime&gt;
  &lt;readytime&gt;1461077708&lt;/readytime&gt;
  &lt;file&gt;CI-demo.spec&lt;/file&gt;
  &lt;versrel&gt;0.1.9-2&lt;/versrel&gt;
  &lt;bcnt&gt;1&lt;/bcnt&gt;
  &lt;release&gt;2.1&lt;/release&gt;
  &lt;debuginfo&gt;1&lt;/debuginfo&gt;
  &lt;prjconfconstraint&gt;linux:version:min 3.0.0&lt;/prjconfconstraint&gt;
  &lt;bdep name="aaa_base" preinstall="1" runscripts="1" notmeta="1" /&gt;
  &lt;bdep name="attr" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="bash" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="coreutils" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="diffutils" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="filesystem" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="fillup" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="glibc" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="grep" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="libbz2-1" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="libgcc_s1" preinstall="1" notmeta="1" /&gt;
  &lt;bdep name="m4" preinstall="1" notmeta="1" /&gt;
[...]
  &lt;path project="Release:Stable" repository="SLE-12_GA"
 server="http://obs.b1-systems.de:5252" /&gt;
  &lt;path project="SUSE:SLE-12:GA" repository="standard"
 server="http://obs.b1-systems.de:5252" /&gt;
&lt;/buildinfo&gt;</screen>
  </sect2>
 </sect1>
</chapter>
